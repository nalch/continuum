mixin nick(user)
  div(ng-if="userId === #{user}.publicId")
    span(class="glyphicon glyphicon-user spaced", aria-hidden="true")
    span(editable-text="#{user}.nick", onshow="stopViewUpdate()", onhide="startViewUpdate()", onbeforesave="setNick($data)") {{ #{user}.nick || #{user}.publicId || "no user information" }}
  span(ng-if="userId !== #{user}.publicId") {{ #{user}.nick || #{user}.publicId || "no user information" }}

// let the page know, which user it is
input(type="hidden", name="userId", ng-model="userId", ng-init="userId='#{userId}'", value="#{userId}", disabled="disabled")

div(class="row row-offcanvas row-offcanvas-right")
  div(class="col-xs-12 col-sm-9")
    div(class="jumbotron")
      {{ board }}
      table(class="table table-bordered")
        tbody
          tr(ng-repeat="row in rows")
            td(ng-repeat="column in columns")
              Cell

  // sidebar
  div(class="col-xs-6 col-sm-3 sidebar-offcanvas", id="sidebar")
    div(class="panel panel-default")
      div(class="panel-heading")
        h3(class="panel-title") Owner
      div(class="panel-body")
        +nick("game.owner")
    div(class="panel panel-default")
      div(class="panel-heading")
        h3(class="panel-title") Opponent
      div(class="panel-body")
        +nick("game.opponent")
    div(class="list-group")
      b {{ game.visitors.length }} visitors
      span(class="list-group-item", ng-repeat="visitor in game.visitors")
        +nick("visitor")